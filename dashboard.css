:root{
  --max:min(2200px,100vw);
  --gutter:clamp(10px,1.35vw,18px);

  --text:rgba(236,239,244,.94);
  --muted:rgba(236,239,244,.68);

  --card:rgba(59,66,82,.48);
  --border:rgba(236,239,244,.12);
  --shadow:0 18px 50px rgba(0,0,0,.35);

  --accent:#9687cf;

  --radius:18px;
  --radius-sm:14px;

  --gap:10px;

  --col-min:200px;
  --col-max:260px;

  --tile-h:60px;
  --tile-pad-y:10px;
  --tile-pad-x:12px;
  --tile-icon:40px;

  --accentA:color-mix(in srgb,var(--accent) 55%,transparent);
  --accentB:color-mix(in srgb,var(--accent) 22%,transparent);

  --midnight-bg:url("https://cmd-q.net/background4.jpg");
  --stars-dim:.30;
  --aurora-alpha:.34;
  --aurora-blur:34px;
}

[data-theme="light"]{
  --text:rgba(32,38,48,.94);
  --muted:rgba(55,64,78,.64);
  --card:rgba(248,250,252,.92);
  --border:rgba(44,54,68,.16);
  --shadow:0 10px 24px rgba(20,28,38,.10);
  background:
    radial-gradient(1200px 700px at 12% 8%,rgba(94,129,172,.08),transparent 62%),
    radial-gradient(980px 620px at 86% 16%,rgba(136,192,208,.07),transparent 64%),
    radial-gradient(1100px 700px at 50% 100%,rgba(163,190,140,.05),transparent 70%),
    linear-gradient(180deg,#edf1f5 0%,#e6ebf2 100%);
}

[data-theme="dark"]{
  --text:rgba(236,239,244,.92);
  --muted:rgba(216,222,233,.66);
  --card:rgba(32,39,51,.62);
  --border:rgba(216,222,233,.16);
  --shadow:0 16px 44px rgba(0,0,0,.42);
  background:
    radial-gradient(1100px 660px at 18% 8%,rgba(129,161,193,.08),transparent 62%),
    radial-gradient(950px 640px at 82% 16%,rgba(94,129,172,.06),transparent 64%),
    linear-gradient(180deg,#0d1117 0%,#141b26 100%);
}

[data-theme="frost"]{
  --text:rgba(236,239,244,.92);
  --muted:rgba(236,239,244,.72);
  --card:rgba(67,76,94,.90);
  --border:rgba(216,222,233,.18);
  --shadow:0 10px 24px rgba(0,0,0,.30);
  --accent:#88c0d0;
  background:
    linear-gradient(180deg,#3b4252 0%,#434c5e 100%);
  background-attachment:fixed;
}

[data-theme="midnight"]{
  --text:rgba(242,245,255,.94);
  --muted:rgba(242,245,255,.70);
  --card:rgba(12,18,34,.50);
  --border:rgba(210,220,255,.13);
  --shadow:0 18px 70px rgba(0,0,0,.60);
  --stars-dim:.38;
  background:
    radial-gradient(1200px 900px at 50% 55%,rgba(6,10,22,.55),rgba(6,10,22,.82) 70%),
    linear-gradient(180deg,
      rgba(0,0,0,calc(1 - var(--stars-dim))) 0%,
      rgba(0,0,0,calc(1 - (var(--stars-dim) * .75))) 55%,
      rgba(0,0,0,calc(1 - (var(--stars-dim) * .60))) 100%
    ),
    radial-gradient(1200px 800px at 50% 40%,rgba(0,0,0,.10),rgba(0,0,0,.55) 70%),
    linear-gradient(180deg,#050a18,#02040c);
  background-attachment:fixed;
  position:relative;
}

body[data-layout="compact"]{
  --col-min:180px;
  --col-max:240px;
  --gap:9px;
  --tile-h:62px;
  --tile-pad-y:10px;
  --tile-pad-x:10px;
  --tile-icon:44px;
}

body[data-layout="medium"]{
  --col-min:185px;
  --col-max:245px;
  --gap:8px;
  --tile-h:60px;
  --tile-icon:44px;
}

body[data-layout="large"]{
  --col-min:190px;
  --col-max:255px;
  --gap:8px;
  --tile-h:76px;
  --tile-icon:56px;
}

@media (min-width:1600px){
  body[data-layout="large"]{--col-min:185px;--col-max:250px;}
}

*{box-sizing:border-box;}
html,body{height:100%;}

body{
  margin:0;
  font-family:"Quicksand",system-ui,-apple-system,Segoe UI,Roboto,Arial,sans-serif;
  color:var(--text);
  background-attachment:fixed;
  font-weight:400;
  letter-spacing:.1px;
  position:relative;
  isolation:isolate;
}

body[data-theme="midnight"]::after{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:-2;
  background:var(--midnight-bg) center/cover no-repeat;
  transform:scale(1.02);
  opacity:.62;
  filter:brightness(.20) contrast(.98) saturate(.85) blur(.15px);
}

body[data-theme="midnight"]::before{
  content:"";
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:-1;
  opacity:var(--aurora-alpha);
  filter:blur(var(--aurora-blur)) saturate(1.25);
  mix-blend-mode:screen;
  background:
    radial-gradient(900px 420px at 18% 22%,color-mix(in srgb,var(--accent) 55%,transparent),transparent 72%),
    radial-gradient(1100px 520px at 82% 18%,color-mix(in srgb,var(--accent) 28%,rgba(94,227,161,.40)),transparent 74%),
    radial-gradient(1000px 560px at 60% 82%,color-mix(in srgb,var(--accent) 22%,rgba(167,139,250,.38)),transparent 78%),
    linear-gradient(90deg,transparent 0%,color-mix(in srgb,var(--accent) 14%,transparent) 38%,transparent 72%);
}

.midnight-noise{
  position:fixed;
  inset:0;
  pointer-events:none;
  z-index:0;
  display:none;
}

body[data-theme="midnight"] .midnight-noise{
  display:block;
  opacity:.085;
  mix-blend-mode:overlay;
  background-image:
    repeating-linear-gradient(0deg,rgba(255,255,255,.018) 0px,rgba(255,255,255,.018) 1px,rgba(0,0,0,0) 2px,rgba(0,0,0,0) 4px),
    repeating-linear-gradient(90deg,rgba(0,0,0,.018) 0px,rgba(0,0,0,.018) 1px,rgba(0,0,0,0) 2px,rgba(0,0,0,0) 4px);
}

.app{
  min-height:100%;
  display:flex;
  flex-direction:column;
  position:relative;
  z-index:1;
}

.topbar{
  position:sticky;
  top:0;
  z-index:50;
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
  border-bottom:1px solid var(--border);
}

body[data-theme="dark"] .topbar{
  background:rgba(17,21,28,.88);
  box-shadow:0 8px 24px rgba(0,0,0,.34);
}
body[data-theme="midnight"] .topbar{
  background:rgba(6,10,22,.48);
  box-shadow:0 10px 40px rgba(0,0,0,.50);
}
body[data-theme="light"] .topbar{
  background:rgba(247,250,253,.92);
  box-shadow:0 8px 20px rgba(20,28,38,.10);
}
body[data-theme="frost"] .topbar{
  background:rgba(59,66,82,.92);
  box-shadow:0 8px 26px rgba(0,0,0,.32);
}

.topbar-inner{
  max-width:var(--max);
  margin:0 auto;
  padding:10px var(--gutter);
  display:grid;
  grid-template-columns:1fr auto 1fr;
  gap:10px;
  align-items:center;
}

.topbar-left{min-width:1px;}
.topbar-meta{
  display:flex;
  align-items:center;
  gap:10px;
  min-height:36px;
  color:var(--muted);
  font-size:12px;
  white-space:nowrap;
}

.topbar-center{
  display:flex;
  align-items:center;
  justify-content:center;
  gap:14px;
}

.topbar-right{
  display:flex;
  justify-content:flex-end;
  align-items:center;
}

.brand{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

.brand-badge{
  width:34px;
  height:34px;
  border-radius:12px;
  background:linear-gradient(135deg,color-mix(in srgb,var(--accent) 60%,transparent),rgba(191,97,106,.18));
  border:1px solid var(--border);
  box-shadow:0 10px 25px rgba(0,0,0,.18);
  display:grid;
  place-items:center;
  user-select:none;
  overflow:hidden;
  transition:transform .16s ease,box-shadow .16s ease,border-color .16s ease,background .16s ease;
}

.brand-badge img{
  width:20px;
  height:20px;
  object-fit:contain;
  filter:drop-shadow(0 2px 6px rgba(0,0,0,.25));
  transition:filter .16s ease;
}

.brand:hover .brand-badge{
  transform:translateY(-1px);
}

.brand:hover .brand-badge img{
  animation:dumpster-fire-flicker .55s steps(2,end) infinite;
}

@keyframes dumpster-fire-flicker{
  0%{
    transform:translateY(0) rotate(0deg) scale(1);
    filter:brightness(1.02) saturate(1.02) drop-shadow(0 2px 5px rgba(255,130,40,.22));
  }
  25%{
    transform:translateY(-.4px) rotate(-1.2deg) scale(1.015);
    filter:brightness(1.08) saturate(1.16) drop-shadow(0 2px 6px rgba(255,120,30,.30));
  }
  50%{
    transform:translateY(.35px) rotate(1deg) scale(.995);
    filter:brightness(.99) saturate(1.05) drop-shadow(0 2px 5px rgba(255,100,20,.24));
  }
  75%{
    transform:translateY(-.2px) rotate(-.8deg) scale(1.01);
    filter:brightness(1.06) saturate(1.13) drop-shadow(0 2px 6px rgba(255,135,50,.28));
  }
  100%{
    transform:translateY(0) rotate(0deg) scale(1);
    filter:brightness(1.02) saturate(1.02) drop-shadow(0 2px 5px rgba(255,130,40,.22));
  }
}

body[data-theme="light"] .brand-badge{
  background:
    linear-gradient(180deg,rgba(255,255,255,.96),rgba(244,248,252,.94));
  border-color:rgba(44,54,68,.20);
  box-shadow:0 6px 16px rgba(20,28,38,.12),inset 0 1px 0 rgba(255,255,255,.85);
}

body[data-theme="light"] .brand-badge img{
  filter:contrast(1.05) saturate(.92) drop-shadow(0 2px 4px rgba(20,28,38,.20));
}

body[data-theme="dark"] .brand-badge{
  background:
    linear-gradient(180deg,rgba(39,48,63,.96),rgba(30,37,49,.96));
  border-color:rgba(216,222,233,.20);
  box-shadow:0 8px 18px rgba(0,0,0,.30),inset 0 1px 0 rgba(216,222,233,.08);
}

body[data-theme="dark"] .brand-badge img{
  filter:brightness(1.06) saturate(.90) drop-shadow(0 2px 6px rgba(0,0,0,.34));
}

body[data-theme="midnight"] .brand-badge{
  background:
    linear-gradient(180deg,rgba(16,24,44,.96),rgba(10,16,32,.96));
  border-color:rgba(129,161,193,.34);
  box-shadow:0 8px 20px rgba(0,0,0,.36),0 0 0 1px rgba(129,161,193,.16),inset 0 1px 0 rgba(216,222,233,.08);
}

body[data-theme="midnight"] .brand-badge img{
  filter:brightness(1.10) saturate(.86) drop-shadow(0 2px 6px rgba(0,0,0,.40));
}

body[data-theme="frost"] .brand-badge{
  background:
    linear-gradient(180deg,rgba(94,113,140,.94),rgba(76,92,118,.94));
  border-color:rgba(216,222,233,.28);
  box-shadow:0 8px 18px rgba(0,0,0,.28),inset 0 1px 0 rgba(236,239,244,.12);
}

body[data-theme="frost"] .brand-badge img{
  filter:saturate(.84) contrast(1.04) drop-shadow(0 2px 5px rgba(0,0,0,.30));
}

.brand-title strong{
  font-size:14px;
  line-height:1.1;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  letter-spacing:.15px;
  font-weight:500;
}

.search{
  width:min(420px,44vw);
  display:flex;
  align-items:center;
  gap:10px;
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--border);
  box-shadow:0 10px 20px rgba(0,0,0,.14);
}

body[data-theme="dark"] .search{background:rgba(255,255,255,.055);}
body[data-theme="dark"] .search{
  background:rgba(28,35,46,.84);
  border-color:rgba(216,222,233,.22);
}
body[data-theme="midnight"] .search{background:rgba(255,255,255,.055);}
body[data-theme="light"] .search{background:rgba(0,0,0,.03);}
body[data-theme="light"] .search{
  background:rgba(255,255,255,.88);
  border-color:rgba(44,54,68,.18);
}
body[data-theme="frost"] .search{background:rgba(255,255,255,.06);}
body[data-theme="frost"] .search{
  background:rgba(46,52,64,.86);
  border-color:rgba(216,222,233,.22);
}

.search svg{opacity:.85;}

.search input{
  width:100%;
  background:transparent;
  border:0;
  outline:0;
  color:var(--text);
  font-size:13px;
  font-family:inherit;
  font-weight:400;
}

.search input::placeholder{
  color:color-mix(in srgb,var(--muted) 75%,transparent);
}

.prefs-drawer{
  position:relative;
  display:inline-flex;
  align-items:center;
}

.prefs-toggle{
  height:36px;
  padding:0 12px;
  border-radius:999px;
  border:1px solid var(--border);
  cursor:pointer;
  font-family:inherit;
  font-weight:600;
  font-size:12px;
  letter-spacing:.12px;
  display:inline-flex;
  align-items:center;
  gap:8px;
  transition:transform .12s ease,background .12s ease;
  white-space:nowrap;
}

body[data-theme="dark"] .prefs-toggle{background:rgba(255,255,255,.045);color:var(--text);}
body[data-theme="dark"] .prefs-toggle{
  background:rgba(39,48,63,.88);
  border-color:rgba(216,222,233,.22);
}
body[data-theme="midnight"] .prefs-toggle{background:rgba(255,255,255,.045);color:var(--text);}
body[data-theme="light"] .prefs-toggle{background:rgba(0,0,0,.03);color:var(--text);}
body[data-theme="light"] .prefs-toggle{
  background:rgba(255,255,255,.90);
  border-color:rgba(44,54,68,.18);
}
body[data-theme="frost"] .prefs-toggle{background:rgba(255,255,255,.06);color:var(--text);}
body[data-theme="frost"] .prefs-toggle{
  background:rgba(67,76,94,.92);
  border-color:rgba(216,222,233,.22);
}

.prefs-toggle:hover{transform:translateY(-1px);}
.prefs-toggle:active{transform:translateY(0px);}

.prefs-toggle .chev{
  width:14px;
  height:14px;
  opacity:.85;
  transition:transform .18s ease;
}
body[data-prefs="open"] .prefs-toggle .chev{transform:rotate(180deg);}

.prefs-panel{
  position:absolute;
  right:0;
  top:50%;
  z-index:60;
  display:inline-flex;
  align-items:center;
  gap:10px;
  padding:6px;
  border-radius:999px;
  border:1px solid var(--border);
  box-shadow:0 14px 40px rgba(0,0,0,.22);
  backdrop-filter:blur(16px);
  -webkit-backdrop-filter:blur(16px);
  opacity:0;
  visibility:hidden;
  pointer-events:none;
  transform-origin:right center;
  transform:translateY(-50%) translateX(10px) scaleX(.12);
  transition:opacity .18s ease,transform .18s ease,visibility 0s linear .18s;
}

body[data-theme="dark"] .prefs-panel{background-color:rgba(16,18,22,.92);}
body[data-theme="dark"] .prefs-panel{
  background-color:rgba(24,31,42,.94);
}
body[data-theme="midnight"] .prefs-panel{background-color:rgba(6,10,22,.92);}
body[data-theme="light"] .prefs-panel{background-color:rgba(255,255,255,.92);}
body[data-theme="light"] .prefs-panel{
  background-color:rgba(247,250,253,.96);
}
body[data-theme="frost"] .prefs-panel{background-color:rgba(46,52,64,.92);}
body[data-theme="frost"] .prefs-panel{
  background-color:rgba(59,66,82,.94);
}

body[data-prefs="open"] .prefs-panel{
  opacity:1;
  visibility:visible;
  pointer-events:auto;
  transform:translateY(-50%) translateX(0px) scaleX(1);
  transition:opacity .18s ease,transform .18s ease,visibility 0s;
}

.controls{
  display:flex;
  align-items:center;
  gap:10px;
  padding:6px;
  border-radius:999px;
  border:1px solid var(--border);
  box-shadow:0 10px 24px rgba(0,0,0,.12);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
}

body[data-theme="dark"] .controls{background:rgba(255,255,255,.045);}
body[data-theme="dark"] .controls{
  background:rgba(28,35,46,.84);
  border-color:rgba(216,222,233,.22);
  border-radius:10px;
}

body[data-theme="dark"] .field{
  background:rgba(39,48,63,.78);
  border-color:rgba(216,222,233,.20);
  box-shadow:inset 0 1px 0 rgba(216,222,233,.06);
}

body[data-theme="dark"] .field label{
  color:rgba(216,222,233,.84);
}

body[data-theme="dark"] .field select{
  color:rgba(236,239,244,.96);
}
body[data-theme="midnight"] .controls{background:rgba(255,255,255,.045);}
body[data-theme="light"] .controls{background:rgba(0,0,0,.03);}
body[data-theme="light"] .controls{
  background:rgba(255,255,255,.86);
  border-color:rgba(44,54,68,.18);
  border-radius:10px;
}
body[data-theme="frost"] .controls{background:rgba(255,255,255,.06);}
body[data-theme="frost"] .controls{
  background:rgba(46,52,64,.84);
  border-color:rgba(216,222,233,.22);
  border-radius:10px;
}

.field{
  display:flex;
  align-items:center;
  gap:8px;
  padding:6px 10px;
  border-radius:999px;
  border:1px solid color-mix(in srgb,var(--border) 80%,transparent);
  background:color-mix(in srgb,var(--card) 40%,transparent);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.10);
  transition:transform .12s ease,border-color .12s ease,box-shadow .12s ease;
}

.field:hover{
  transform:translateY(-1px);
  border-color:color-mix(in srgb,var(--accent) 35%,var(--border));
  box-shadow:0 10px 22px rgba(0,0,0,.10),inset 0 1px 0 rgba(255,255,255,.12);
}

.field .chip{
  width:22px;
  height:22px;
  border-radius:999px;
  display:grid;
  place-items:center;
  background:color-mix(in srgb,var(--accent) 18%,transparent);
  border:1px solid color-mix(in srgb,var(--accent) 24%,var(--border));
  color:color-mix(in srgb,var(--accent) 85%,currentColor);
}
.field .chip svg{opacity:.9;}

.field label{
  font-size:12px;
  color:var(--muted);
  white-space:nowrap;
  font-weight:500;
  letter-spacing:.1px;
}

.field select{
  border:0;
  outline:0;
  background:transparent;
  color:var(--text);
  font-size:12px;
  font-family:inherit;
  font-weight:600;
  letter-spacing:.15px;
  padding:0 20px 0 0;
  appearance:none;
  cursor:pointer;
}

.field .caret{
  width:14px;
  height:14px;
  opacity:.75;
  margin-left:-14px;
  pointer-events:none;
}

.field:focus-within{
  border-color:color-mix(in srgb,var(--accent) 55%,var(--border));
  box-shadow:0 0 0 3px color-mix(in srgb,var(--accent) 22%,transparent),inset 0 1px 0 rgba(255,255,255,.12);
}

.controls option{color:#111;}

.palette-btn{
  width:34px;
  height:28px;
  border-radius:999px;
  border:1px solid var(--border);
  display:grid;
  place-items:center;
  cursor:pointer;
  transition:transform .12s ease,background .12s ease;
  position:relative;
  overflow:hidden;
  color:var(--accent);
}

body[data-theme="dark"] .palette-btn{background:rgba(255,255,255,.045);}
body[data-theme="dark"] .palette-btn{
  background:rgba(39,48,63,.88);
  border-color:rgba(216,222,233,.22);
}
body[data-theme="midnight"] .palette-btn{background:rgba(255,255,255,.045);}
body[data-theme="light"] .palette-btn{background:rgba(0,0,0,.03);}
body[data-theme="light"] .palette-btn{
  background:rgba(255,255,255,.92);
  border-color:rgba(44,54,68,.18);
}
body[data-theme="frost"] .palette-btn{background:rgba(255,255,255,.06);}
body[data-theme="frost"] .palette-btn{
  background:rgba(67,76,94,.90);
  border-color:rgba(216,222,233,.22);
}

.palette-btn::after{
  content:"";
  position:absolute;
  right:6px;
  bottom:5px;
  width:8px;
  height:8px;
  border-radius:999px;
  background:var(--accent);
  box-shadow:0 0 0 2px rgba(0,0,0,.10);
}

body[data-theme="dark"] .palette-btn::after,
body[data-theme="midnight"] .palette-btn::after,
body[data-theme="frost"] .palette-btn::after{
  box-shadow:0 0 0 2px rgba(255,255,255,.10);
}

.palette-btn:hover{transform:translateY(-1px);}
.palette-btn:active{transform:translateY(0px);}

.accent-input{
  position:absolute;
  opacity:0;
  width:1px;
  height:1px;
  pointer-events:none;
}

button.reset{
  padding:8px 12px;
  border-radius:999px;
  border:1px solid var(--border);
  font-size:12px;
  cursor:pointer;
  transition:transform .12s ease,background .12s ease;
  font-family:inherit;
  font-weight:500;
}

body[data-theme="dark"] button.reset{background:rgba(255,255,255,.045);color:var(--text);}
body[data-theme="dark"] button.reset{
  background:rgba(39,48,63,.88);
  border-color:rgba(216,222,233,.22);
}
body[data-theme="midnight"] button.reset{background:rgba(255,255,255,.045);color:var(--text);}
body[data-theme="light"] button.reset{background:rgba(0,0,0,.03);color:var(--text);}
body[data-theme="light"] button.reset{
  background:rgba(255,255,255,.92);
  border-color:rgba(44,54,68,.18);
}
body[data-theme="frost"] button.reset{background:rgba(255,255,255,.06);color:var(--text);}
body[data-theme="frost"] button.reset{
  background:rgba(67,76,94,.90);
  border-color:rgba(216,222,233,.22);
}

button.reset:hover{transform:translateY(-1px);}
button.reset:active{transform:translateY(0px);}

main{
  width:100%;
  max-width:var(--max);
  margin:0 auto;
  padding:8px var(--gutter) 36px;
  display:flex;
  flex-direction:column;
  gap:12px;
}

.quick-row{
  display:flex;
  flex-wrap:wrap;
  align-items:center;
  justify-content:center;
  gap:12px;
}

.quick-row .tile{
  width:auto !important;
  flex:0 0 auto;
  min-height:40px;
  padding:6px 12px;
  gap:10px;
  border-radius:999px;
}

.quick-row .tile-icon{
  width:26px;
  height:26px;
  border-radius:9px;
}

.quick-row .tile-text{flex:0 0 auto;}
.quick-row .tile-title{white-space:nowrap;}
.quick-row .tile-meta{display:none !important;}

body[data-layout="medium"] .quick-row .tile{
  min-height:38px;
  padding:5px 11px;
  gap:9px;
}
body[data-layout="medium"] .quick-row .tile-icon{
  width:24px;
  height:24px;
  border-radius:8px;
}
body[data-layout="medium"] .quick-row .tile-title{
  font-size:12.5px;
}

body[data-layout="large"] .quick-row .tile-title{
  font-size:14px;
}

body[data-layout="large"] .cat-title{
  font-size:15.5px;
}

body[data-layout="large"] .tile-title{
  font-size:14.5px;
}

body[data-layout="large"] .tile-meta{
  font-size:12.5px;
}

.columns{
  display:grid;
  grid-template-columns:repeat(auto-fit, minmax(var(--col-min), var(--col-max)));
  gap:var(--gap);
  align-items:start;
  grid-auto-flow:dense;
  justify-content:center;
}

.category{
  background:var(--card);
  border:1px solid var(--border);
  border-radius:var(--radius);
  box-shadow:var(--shadow);
  overflow:hidden;
  position:relative;
  backdrop-filter:blur(12px);
  -webkit-backdrop-filter:blur(12px);
}

body[data-theme="dark"] .category{
  background:rgba(20,27,38,.82);
  border-color:rgba(216,222,233,.18);
  box-shadow:0 12px 30px rgba(0,0,0,.34),inset 0 1px 0 rgba(216,222,233,.06);
}

body[data-theme="dark"] .cat-head{
  border-bottom:1px solid rgba(216,222,233,.14);
  background:
    linear-gradient(180deg,rgba(255,255,255,.06),rgba(255,255,255,.01)),
    linear-gradient(90deg,color-mix(in srgb,var(--cat-color) 24%,#2e3440),transparent 72%);
}

body[data-theme="dark"] .cat-icon{
  color:color-mix(in srgb,var(--cat-color) 54%,#eceff4);
}

body[data-theme="dark"] .cat-title{
  font-weight:600;
  letter-spacing:.1px;
}

/* Midnight: unified, non-rainbow category style */
body[data-theme="midnight"]{
  --radius:10px;
  --radius-sm:8px;
  --accent:#81a1c1;
}

body[data-theme="midnight"] .category{
  --cat-color:#81a1c1;
  background:rgba(12,18,34,.72);
  border:1px solid rgba(129,161,193,.34);
  box-shadow:0 10px 28px rgba(0,0,0,.42);
}

body[data-theme="midnight"] .cat-head{
  border-bottom:1px solid rgba(76,86,106,.45);
  background:
    linear-gradient(180deg, rgba(216,222,233,.10), rgba(216,222,233,.03)),
    linear-gradient(90deg, rgba(129,161,193,.30), rgba(129,161,193,.10));
}

body[data-theme="midnight"] .cat-title,
body[data-theme="midnight"] .cat-icon{
  color:#d8dee9;
}

body[data-theme="midnight"] .cat-body{
  background:rgba(9,14,27,.42);
}

body[data-theme="frost"]{
  --radius:10px;
  --radius-sm:8px;
}

body[data-theme="frost"] .category{
  --cat-color:var(--accent);
  background:rgba(34,45,70,.68);
  border:2px solid color-mix(in srgb,var(--cat-color) 72%,rgba(216,222,233,.25));
  box-shadow:0 10px 24px rgba(0,0,0,.26);
}

body[data-theme="frost"] .search,
body[data-theme="frost"] .prefs-toggle,
body[data-theme="frost"] .field,
body[data-theme="frost"] .palette-btn,
body[data-theme="frost"] button.reset{
  border-radius:8px;
}

body[data-theme="frost"] .cat-title,
body[data-theme="frost"] .tile-title{
  font-family:"Ubuntu Mono","Cascadia Mono","Consolas",monospace;
  letter-spacing:.08px;
  font-weight:500;
}

.cat-head{
  padding:10px 12px;
  display:flex;
  align-items:center;
  justify-content:space-between;
  gap:10px;
  border-bottom:1px solid rgba(255,255,255,.10);
  background:
    linear-gradient(180deg,rgba(0,0,0,.10),transparent),
    linear-gradient(90deg,color-mix(in srgb,var(--cat-color) 65%,transparent),transparent 70%);
}

body[data-theme="light"] .cat-head{
  border-bottom:1px solid rgba(0,0,0,.08);
  background:
    linear-gradient(180deg,rgba(0,0,0,.03),transparent),
    linear-gradient(90deg,color-mix(in srgb,var(--cat-color) 30%,#f4f7fb),transparent 74%);
}

body[data-theme="light"] .category{
  background:rgba(248,250,252,.94);
  border-color:rgba(44,54,68,.14);
  box-shadow:0 10px 24px rgba(20,28,38,.09);
}

body[data-theme="light"] .cat-icon{
  color:color-mix(in srgb,var(--cat-color) 58%,#2e3440);
}

body[data-theme="light"] .cat-title{
  font-weight:600;
  letter-spacing:.08px;
}

body[data-theme="frost"] .cat-head{
  border-bottom:1px solid rgba(46,52,64,.28);
  background:color-mix(in srgb,var(--cat-color) 62%,#e5e9f0);
}

body[data-theme="frost"] .cat-title,
body[data-theme="frost"] .cat-icon{
  color:#2e3440;
}

body[data-theme="frost"] .cat-body{
  background:rgba(36,50,78,.76);
}

.cat-left{
  display:flex;
  align-items:center;
  gap:10px;
  min-width:0;
}

.cat-icon{
  width:22px;
  height:22px;
  display:grid;
  place-items:center;
  color:color-mix(in srgb,var(--cat-color) 85%,white);
  opacity:.95;
  flex:0 0 auto;
}

body[data-theme="light"] .cat-icon{
  color:color-mix(in srgb,var(--cat-color) 75%,black);
}

.cat-title{
  font-size:14px;
  font-weight:500;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  letter-spacing:.12px;
}

.cat-body{
  padding:10px;
  display:flex;
  flex-direction:column;
  gap:10px;
}

.tile{
  display:flex;
  align-items:center;
  gap:12px;
  padding:var(--tile-pad-y) var(--tile-pad-x);
  min-height:var(--tile-h);
  border-radius:var(--radius-sm);
  border:1px solid rgba(255,255,255,.12);
  text-decoration:none;
  color:var(--text);
  transition:transform .12s ease,background .12s ease,border-color .12s ease,box-shadow .12s ease;
  outline:none;
  position:relative;
  overflow:hidden;
}

.tile[data-reorder="true"]{
  cursor:grab;
}

body.reorder-active .tile[data-reorder="true"]{
  transition-duration:.22s;
  will-change:transform;
}

body.reorder-active .tile[data-reorder="true"]:active{
  cursor:grabbing;
}

.sortable-chosen{
  transform:scale(1.015);
}

.sortable-drag{
  opacity:.98;
  box-shadow:0 14px 34px rgba(0,0,0,.30) !important;
}

.sortable-ghost{
  opacity:.72;
  transform:scale(.985);
}

.tile[data-reorder="true"]::after{
  content:"";
  position:absolute;
  right:8px;
  top:50%;
  width:8px;
  height:12px;
  transform:translateY(-50%);
  opacity:.14;
  pointer-events:none;
  background-image:radial-gradient(currentColor 1px,transparent 1.4px);
  background-size:4px 4px;
}

.tile[data-reorder="true"]:hover::after{
  opacity:.24;
}

body[data-theme="dark"] .tile{
  background:rgba(45,55,72,.50);
  border-color:rgba(216,222,233,.16);
  box-shadow:inset 0 1px 0 rgba(216,222,233,.05);
}

body[data-theme="dark"] .tile-title{
  font-weight:650;
}

body[data-theme="midnight"] .tile{
  background:rgba(67,76,94,.40);
  border-color:rgba(129,161,193,.24);
}

body[data-theme="light"] .tile{
  background:rgba(255,255,255,.88);
  border:1px solid rgba(44,54,68,.14);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.65);
}

body[data-theme="frost"] .tile{
  background:rgba(76,86,106,.92);
  border-color:rgba(46,52,64,.88);
  box-shadow:inset 0 1px 0 rgba(236,239,244,.05);
}

body[data-theme="frost"] .tile::before{display:none;}

body[data-theme="frost"] .tile:hover{
  transform:none;
  border-color:color-mix(in srgb,var(--cat-color) 65%,#e5e9f0);
  box-shadow:0 8px 20px rgba(0,0,0,.24);
}

.tile::before{
  content:"";
  position:absolute;
  inset:-2px;
  background:
    radial-gradient(240px 120px at 18% 35%,var(--accentA),transparent 65%),
    linear-gradient(90deg,var(--accentB),transparent 65%);
  opacity:0;
  transition:opacity .12s ease;
  pointer-events:none;
}

.tile:hover::before{opacity:1;}

.tile:hover{
  transform:translateY(-2px);
  border-color:color-mix(in srgb,var(--accent) 45%,rgba(255,255,255,.18));
  box-shadow:0 14px 40px rgba(0,0,0,.28);
}

body[data-theme="light"] .tile:hover{
  border-color:color-mix(in srgb,var(--accent) 36%,rgba(44,54,68,.18));
  box-shadow:0 8px 22px rgba(20,28,38,.14);
}

body[data-theme="light"] .tile:hover .tile-icon{
  border-color:color-mix(in srgb,var(--accent) 38%,rgba(44,54,68,.18));
  box-shadow:0 0 0 3px color-mix(in srgb,var(--accent) 10%,transparent);
}

body[data-theme="light"] .field{
  background:rgba(255,255,255,.90);
  border-color:rgba(44,54,68,.16);
  box-shadow:inset 0 1px 0 rgba(255,255,255,.75);
}

body[data-theme="light"] .field label{
  color:rgba(55,64,78,.84);
}

body[data-theme="light"] .field select{
  color:rgba(32,38,48,.96);
}

body[data-theme="dark"] .tile:hover{
  transform:translateY(-1px);
  border-color:color-mix(in srgb,var(--accent) 42%,rgba(216,222,233,.20));
  box-shadow:0 10px 24px rgba(0,0,0,.28);
}

body[data-theme="midnight"] .tile:hover{
  transform:none;
  border-color:rgba(143,188,187,.46);
  box-shadow:0 8px 20px rgba(0,0,0,.35);
}

.tile:focus-visible{
  box-shadow:0 0 0 3px color-mix(in srgb,var(--accent) 40%,transparent),var(--shadow);
}

.tile-icon{
  width:var(--tile-icon);
  height:var(--tile-icon);
  border-radius:12px;
  background:rgba(0,0,0,.14);
  border:1px solid rgba(255,255,255,.12);
  overflow:hidden;
  flex:0 0 auto;
  display:grid;
  place-items:center;
  position:relative;
  z-index:1;
  transition:box-shadow .12s ease,border-color .12s ease;
}

body[data-theme="light"] .tile-icon{
  background:rgba(0,0,0,.05);
  border:1px solid rgba(0,0,0,.10);
}

body[data-theme="frost"] .tile-icon{
  background:rgba(59,66,82,.95);
  border-color:rgba(216,222,233,.14);
  border-radius:8px;
}

.tile:hover .tile-icon{
  border-color:color-mix(in srgb,var(--accent) 55%,rgba(255,255,255,.18));
  box-shadow:0 0 0 4px color-mix(in srgb,var(--accent) 18%,transparent);
}

body[data-theme="frost"] .tile:hover .tile-icon{
  border-color:rgba(216,222,233,.22);
  box-shadow:none;
}

body[data-theme="dark"] .tile:hover .tile-icon{
  border-color:color-mix(in srgb,var(--accent) 48%,rgba(216,222,233,.22));
  box-shadow:0 0 0 3px color-mix(in srgb,var(--accent) 12%,transparent);
}

body[data-layout="compact"] .tile[data-reorder="true"]::after{
  top:auto;
  bottom:7px;
  right:7px;
  transform:none;
}

.tile-icon img{
  width:100%;
  height:100%;
  object-fit:cover;
}

.tile-text{
  min-width:0;
  display:flex;
  flex-direction:column;
  gap:4px;
  flex:1 1 auto;
  position:relative;
  z-index:1;
}

.tile-title{
  font-size:13px;
  font-weight:600;
  white-space:nowrap;
  overflow:hidden;
  text-overflow:ellipsis;
  letter-spacing:.12px;
}

.tile-meta{
  font-size:12px;
  color:var(--muted);
  line-height:1.25;
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
  font-weight:400;
}

body[data-layout="medium"] .tile-meta{display:none;}
body[data-layout="large"] .tile-meta{display:-webkit-box;}

body[data-layout="compact"] .cat-body{
  display:grid;
  grid-template-columns:repeat(2,minmax(0,1fr));
  gap:10px;
}

body[data-layout="compact"] .cat-body .tile{
  width:100%;
  flex-direction:column;
  align-items:center;
  justify-content:center;
  text-align:center;
  gap:6px;
  padding:10px 8px;
  min-height:96px;
}

body[data-layout="compact"] .cat-body .tile-icon{
  width:46px;
  height:46px;
  border-radius:14px;
}

body[data-layout="compact"] .cat-body .tile-text{width:100%;}

body[data-layout="compact"] .cat-body .tile-title{
  font-size:12px;
  font-weight:700;
  line-height:1.1;
  white-space:normal;
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:2;
  -webkit-box-orient:vertical;
}

body[data-layout="compact"] .cat-body .tile-meta{display:none !important;}

.category[hidden]{display:none !important;}

.switch-page{
  min-height:100%;
  padding:18px var(--gutter) 44px;
  display:flex;
  flex-direction:column;
  align-items:center;
  gap:12px;
}

.switch-page > a.tile{
  max-width:fit-content !important;
  margin:0 0 6px !important;
  padding:7px 12px !important;
  min-height:42px;
  border-radius:999px;
  gap:10px;
}

.switch-page > a.tile .tile-icon{
  width:28px;
  height:28px;
  border-radius:10px;
}

.switch-page > a.tile .tile-icon img{
  object-fit:contain;
}

.switch-page > a.tile .tile-meta{
  display:none !important;
}

.switch-page h1{
  margin:2px 0 10px;
  font-size:clamp(22px,2.1vw,34px);
  text-align:center;
  font-weight:700;
  letter-spacing:.12px;
  opacity:.92;
}

.switch-columns{
  width:100%;
  max-width:min(1320px,var(--max));
  display:flex;
  flex-wrap:wrap;
  justify-content:center;
  align-items:flex-start;
  gap:14px;
  margin:0;
}

.switch-columns .column{
  width:clamp(330px,30vw,380px);
  max-width:calc(100vw - (var(--gutter) * 2));
  min-width:0;
  border-radius:22px;
  border:1px solid color-mix(in srgb,var(--border) 92%,transparent);
  overflow:hidden;
  background:color-mix(in srgb,var(--card) 62%,transparent);
  box-shadow:0 16px 42px rgba(0,0,0,.18);
  backdrop-filter:blur(14px);
  -webkit-backdrop-filter:blur(14px);
  padding:0;
  align-self:flex-start;
  height:fit-content;
}

body[data-theme="dark"] .switch-columns .column{
  background:rgba(28,35,46,.62);
  border-color:rgba(216,222,233,.18);
  box-shadow:0 12px 30px rgba(0,0,0,.32),inset 0 1px 0 rgba(216,222,233,.05);
}

body[data-theme="midnight"] .switch-columns .column{
  background:rgba(10,16,32,.44);
  box-shadow:0 18px 64px rgba(0,0,0,.46),inset 0 1px 0 rgba(255,255,255,.05);
}

body[data-theme="frost"] .switch-columns .column{
  background:rgba(59,66,82,.46);
  box-shadow:0 16px 45px rgba(0,0,0,.32),inset 0 1px 0 rgba(255,255,255,.05);
}

.switch-heading{
  margin:0;
  padding:10px 12px;
  text-align:center;
  font-size:16px;
  font-weight:900;
  letter-spacing:.28px;
  opacity:.96;
  border-bottom:1px solid color-mix(in srgb,var(--border) 92%,transparent);
  background:
    linear-gradient(180deg,color-mix(in srgb,var(--card) 70%,transparent),transparent),
    radial-gradient(900px 220px at 50% 0%,color-mix(in srgb,var(--accent) 14%,transparent),transparent 70%);
  color:color-mix(in srgb,var(--accent) 58%,var(--text));
}

.switch-list{
  list-style:none;
  padding:6px 8px 8px;
  margin:0;
  display:flex;
  flex-direction:column;
  gap:0;
}

.switch-list li{
  display:grid;
  grid-template-columns:minmax(0,1fr) max-content;
  column-gap:10px;
  align-items:center;
  padding:6px 8px;
  border-radius:14px;
  background:transparent;
  border:1px solid transparent;
  transition:background .12s ease,border-color .12s ease,transform .12s ease,box-shadow .12s ease;
}

.switch-list li + li{
  margin-top:6px;
}

.switch-list li:hover{
  transform:translateY(-1px);
  background:color-mix(in srgb,var(--accent) 8%,transparent);
  border-color:color-mix(in srgb,var(--accent) 18%,var(--border));
  box-shadow:0 10px 22px rgba(0,0,0,.12);
}

body[data-theme="light"] .switch-list li:hover{
  box-shadow:0 10px 20px rgba(0,0,0,.10);
}

.switch-name{
  min-width:0;
  overflow:hidden;
  text-overflow:ellipsis;
  white-space:nowrap;
  font-size:12.7px;
  font-weight:800;
  letter-spacing:.06px;
  line-height:1.15;
  color:color-mix(in srgb,var(--accent) 55%,var(--text));
}

.switch-name a{
  display:block;
  color:inherit;
  text-decoration:none;
}

.switch-name a:hover{
  text-decoration:underline;
  text-underline-offset:2px;
}

.switch-name a:focus-visible{
  outline:none;
  box-shadow:0 0 0 3px color-mix(in srgb,var(--accent) 26%,transparent);
  border-radius:10px;
}

.switch-ip{
  justify-self:end;
  text-align:right;
  font-size:11.1px;
  font-weight:900;
  letter-spacing:.16px;
  padding:3px 7px;
  border-radius:999px;
  border:1px solid color-mix(in srgb,var(--border) 92%,transparent);
  background:color-mix(in srgb,var(--card) 78%,transparent);
  color:color-mix(in srgb,var(--muted) 92%,transparent);
  font-variant-numeric:tabular-nums;
  white-space:nowrap;
  line-height:1;
}

.switch-ip::before{
  content:"";
}

@media (max-width:980px){
  .topbar-inner{grid-template-columns:1fr;}
  .topbar-center{justify-content:flex-start;flex-wrap:wrap;}
  .topbar-right{justify-content:flex-start;}
  .topbar-meta{min-height:0;}
  .search{width:100%;}
  .prefs-panel{
    left:0;
    right:auto;
    top:calc(100% + 10px);
    border-radius:18px;
    padding:10px;
    flex-wrap:wrap;
    width:max-content;
    max-width:calc(100vw - (var(--gutter) * 2));
    transform-origin:top left;
    transform:translateY(-6px) scale(.98);
  }
  body[data-prefs="open"] .prefs-panel{transform:translateY(0) scale(1);}
}

@media (max-width:720px){
  :root{--col-min:100%;--col-max:100%;}
  .columns{grid-template-columns:1fr;justify-content:stretch;}
  main{padding:8px var(--gutter) 34px;}
  .quick-row{justify-content:flex-start;}
  .switch-columns{
    flex-direction:column;
    align-items:center;
  }
  
  .switch-columns .column{
    width:100%;
    max-width:min(560px,calc(100vw - (var(--gutter) * 2)));
  }
}
.switch-columns{
  max-width:min(1120px,var(--max));
  gap:12px;
}

.switch-columns .column{
  width:clamp(260px,24vw,305px);
  border-radius:20px;
}

.switch-heading{
  font-size:16px;
  padding:9px 12px;
}

.switch-list{
  padding:6px 8px 10px;
}

.switch-list li{
  grid-template-columns:minmax(0,1fr) max-content;
  column-gap:8px;
  padding:5px 8px;
  border-radius:12px;
}

.switch-name{
  font-size:12.5px;
}

.switch-ip{
  padding:2px 7px;
  font-size:11px;
}

@media (prefers-reduced-motion: reduce){
  *,*::before,*::after{
    animation:none !important;
    transition:none !important;
    scroll-behavior:auto !important;
  }
  .tile:hover,
  .field:hover,
  .prefs-toggle:hover,
  .palette-btn:hover,
  button.reset:hover{
    transform:none !important;
  }
}
